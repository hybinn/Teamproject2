<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>장바구니</title>
    <link rel="stylesheet" href="cart_style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
      crossorigin="anonymous"
    />
  </head>
  <header>
    <nav class="navbar navbar-light bg-white" style="padding: 0.5%">
      <div class="container" style="display: block; text-align: center">
        <a class="navbar-brand" href="/">
          <img src="/img/bowdatalogo.jpg" alt="bowdatalogo" width="90" />
        </a>
      </div>
    </nav>
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white"
      style="padding: 0.2%"
    >
      <div class="container-fluid">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse"
          id="navbarSupportedContent"
          style="font-family: 'Do Hyeon', sans-serif; font-size: 1.1em"
        >
          <ul class="navbar-nav justify-content-center" style="width: 100%">
            <li class="nav-item">
              <a aria-current="page" class="nav-link active" href="pedia.html"
                >Pedia</a
              >
              <!-- 견종별 소개 및 특징 설명하는 페이지 -->
            </li>
            <li class="nav-item">
              <a aria-current="page" class="nav-link active" href="data.html"
                >Data</a
              >
              <!-- 강아지 관련 상식 페이지 -->
            </li>
            <li class="nav-item">
              <a aria-current="page" class="nav-link active" href="news.html"
                >News</a
              >
              <!-- 강아지 관련 뉴스 페이지 -->
            </li>
            <li class="nav-item">
              <a
                aria-current="page"
                class="nav-link active"
                href="supplies.html"
                >Supplies</a
              >
              <!-- 강아지 용품 추천 페이지 -->
            </li>
            <li class="nav-item">
              <a aria-current="page" class="nav-link active" href="team.html"
                >Team</a
              >
              <!-- 팀 프로젝트 및 팀원 소개 페이지-->
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <hr style="margin-top: 0px" />
  </header>
  <body>
    <div class="container my-5">
      <h1 class="text-center mb-4">장바구니</h1>

      <!-- 강아지 간식 섹션 -->
      <div class="card mb-3" id="dog-snack-section" style="display: none">
        <div class="card-body">
          <h5 class="card-title">강아지 간식</h5>
          <div class="row">
            <div class="col-md-2">
              <img
                id="cart-image-1"
                src="img/강아지간식.jpg"
                alt="선택한 강아지 간식 이미지"
                class="img-fluid rounded"
              />
            </div>
            <div
              class="col-md-10 d-flex align-items-end"
              style="width: 624px; height: 120px"
            >
              <p class="card-text" id="cart-details-1">.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 강아지 사료 섹션 -->
      <div class="card mb-3" id="dog-feed-section" style="display: none">
        <div class="card-body">
          <h5 class="card-title">강아지 사료</h5>
          <div class="row">
            <div class="col-md-2">
              <img
                id="cart-image-2"
                src="img/강아지사료.jpg"
                alt="선택한 강아지 이미지"
                class="img-fluid rounded"
              />
            </div>
            <div
              class="col-md-10 d-flex align-items-end"
              style="width: 624px; height: 105px"
            >
              <p class="card-text" id="cart-details-2">.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 강아지 캔넬 섹션 -->
      <div class="card mb-3" id="dog-canel-section" style="display: none">
        <div class="card-body">
          <h5 class="card-title">강아지 캔넬</h5>
          <div class="row">
            <div class="col-md-2">
              <img
                id="cart-image-3"
                src="img/강아지캔넬.jpg"
                alt="선택한 강아지 이미지"
                class="img-fluid rounded"
              />
            </div>
            <div
              class="col-md-10 d-flex align-items-end"
              style="width: 624px; height: 105px"
            >
              <p class="card-text" id="cart-details-3">.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 강아지 목줄 섹션 -->
      <div class="card mb-3" id="dog-snood-section" style="display: none">
        <div class="card-body">
          <h5 class="card-title">강아지 목줄</h5>
          <div class="row">
            <div class="col-md-2">
              <img
                id="cart-image-4"
                src="img/강아지목줄.jpg"
                alt="선택한 강아지이미지"
                class="img-fluid rounded"
              />
            </div>
            <div
              class="col-md-10 d-flex align-items-end"
              style="width: 624px; height: 120px"
            >
              <p class="card-text" id="cart-details-4">.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 강아지 샴푸 섹션 -->
      <div class="card mb-3" id="dog-sampe-section" style="display: none">
        <div class="card-body">
          <h5 class="card-title">강아지 샴푸</h5>
          <div class="row">
            <div class="col-md-2">
              <img
                id="cart-image-5"
                src="img/강아지샴푸.jpg"
                alt="선택한 강아지이미지"
                class="img-fluid rounded"
              />
            </div>
            <div
              class="col-md-10 d-flex align-items-end"
              style="width: 624px; height: 120px"
            >
              <p class="card-text" id="cart-details-5">.</p>
            </div>
          </div>
        </div>
      </div>
      <hr />
      <h3 id="total-price">총 금액 :</h3>
      <hr />

      <div class="container my-3">
        <a href="supplies.html" class="btn btn-primary">계속 쇼핑하기</a>
        <a
          href="supplies.html"
          class="btn btn-primary"
          onclick="alert('구매 완료되었습니다.');"
          >구매하기</a
        >
      </div>
    </div>

    <footer>
      <p>Copyright &copy; 2024, Made by TEAM "Bow Data"<br /></p>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // localStorage에서 데이터 가져오기
        var snackNumber = localStorage.getItem('selectedNumber')
        var snackFlavor = localStorage.getItem('selectedFlavor')
        var snackPrice = localStorage.getItem('selectedPrice')
        var feedNumber = localStorage.getItem('Number_feed')
        var feedPrice = localStorage.getItem('Price_feed')
        var canelNumber = localStorage.getItem('Number_canel')
        var canelPrice = localStorage.getItem('Price_canel')
        var snoodNumber = localStorage.getItem('Number_snood')
        var snoodPrice = localStorage.getItem('Price_snood')
        var sampeNumber = localStorage.getItem('Number_sampe')
        var sampePrice = localStorage.getItem('Price_sampe')

        var totalPrice = 0

        // 가져온 데이터를 각 섹션에 표시하고 총 금액 계산
        if (snackNumber && snackFlavor && snackPrice) {
          var formattedSnackPrice = parseInt(snackPrice).toLocaleString()
          document.getElementById('cart-details-1').innerHTML = `
            <strong>갯수:</strong> ${snackNumber}개<br>
            <strong>맛:</strong> ${snackFlavor}<br>
            <strong>가격:</strong> ${formattedSnackPrice}원`
          document.getElementById('dog-snack-section').style.display = 'block'
          totalPrice += parseInt(snackPrice)
        }

        if (feedNumber && feedPrice) {
          var formattedFeedPrice = parseInt(feedPrice).toLocaleString()
          document.getElementById('cart-details-2').innerHTML = `
            <strong>갯수:</strong> ${feedNumber}개<br>
            <strong>가격:</strong> ${formattedFeedPrice}원`
          document.getElementById('dog-feed-section').style.display = 'block'
          totalPrice += parseInt(feedPrice)
        }

        if (canelNumber && canelPrice) {
          var formattedCanelPrice = parseInt(canelPrice).toLocaleString()
          document.getElementById('cart-details-3').innerHTML = `
            <strong>갯수:</strong> ${canelNumber}개<br>
            <strong>가격:</strong> ${formattedCanelPrice}원`
          document.getElementById('dog-canel-section').style.display = 'block'
          totalPrice += parseInt(canelPrice)
        }

        if (snoodNumber && snoodPrice) {
          var formattedSnoodPrice = parseInt(snoodPrice).toLocaleString()
          document.getElementById('cart-details-4').innerHTML = `
            <strong>갯수:</strong> ${snoodNumber}개<br>
            <strong>가격:</strong> ${formattedSnoodPrice}원`
          document.getElementById('dog-snood-section').style.display = 'block'
          totalPrice += parseInt(snoodPrice)
        }

        if (sampeNumber && sampePrice) {
          var formattedSampePrice = parseInt(sampePrice).toLocaleString()
          document.getElementById('cart-details-5').innerHTML = `
            <strong>갯수:</strong> ${sampeNumber}개<br>
            <strong>가격:</strong> ${formattedSampePrice}원`
          document.getElementById('dog-sampe-section').style.display = 'block'
          totalPrice += parseInt(sampePrice)
        }

        // 배송비 추가 로직
        var shippingCost = 0
        if (totalPrice < 30000) {
          shippingCost = 3000
          totalPrice += shippingCost
        }

        // 총 금액 표시
        var formattedTotalPrice = totalPrice.toLocaleString()
        var formattedShippingCost = shippingCost.toLocaleString()
        document.getElementById(
          'total-price'
        ).innerHTML = `총 금액 : ${formattedTotalPrice}원 (배송비: ${formattedShippingCost}원)`
      })
    </script>
  </body>
</html>
